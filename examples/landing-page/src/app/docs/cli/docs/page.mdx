# zonfig docs

Generate documentation from your Zod schema.

## Usage

```bash
npx zonfig docs [options]
```

## Options

| Option | Description | Default |
|--------|-------------|---------|
| `-s, --schema <file>` | Path to schema file | Required |
| `-o, --output <dir>` | Output directory | `.` |
| `-f, --format <type>` | Output format | `all` |
| `-p, --prefix <prefix>` | Env var prefix (for env format) | `APP_` |
| `-t, --title <title>` | Title for markdown docs | Schema name |

## Formats

| Format | Output File | Description |
|--------|-------------|-------------|
| `markdown` | `CONFIG.md` | Markdown documentation |
| `env` | `.env.example` | Environment variable template |
| `json-schema` | `config.schema.json` | JSON Schema |
| `all` | All of the above | Generate all formats |

## Examples

### Generate All Formats

```bash
npx zonfig docs -s ./src/config.ts
```

Creates:
- `CONFIG.md`
- `.env.example`
- `config.schema.json`

### Generate Only Markdown

```bash
npx zonfig docs -s ./src/config.ts -f markdown
```

### Generate to Specific Directory

```bash
npx zonfig docs -s ./src/config.ts -o ./docs
```

### Custom Env Prefix

```bash
npx zonfig docs -s ./src/config.ts -f env -p MYAPP_
```

## Output Examples

### Markdown (CONFIG.md)

```markdown
# Configuration Reference

## server

| Key | Type | Required | Default | Description |
|-----|------|----------|---------|-------------|
| `server.host` | string | No | `"localhost"` | Server hostname |
| `server.port` | number | No | `3000` | Server port |

## database

| Key | Type | Required | Default | Description |
|-----|------|----------|---------|-------------|
| `database.url` | string (url) | Yes | - | Database connection URL |
| `database.pool` | number | No | `10` | Connection pool size |
```

### Environment Template (.env.example)

```bash
# Configuration Environment Variables
# Generated by zonfig

# Server Configuration
# Type: string (optional, default: "localhost")
APP_SERVER__HOST=localhost

# Type: number (optional, default: 3000)
APP_SERVER__PORT=3000

# Database Configuration
# Type: string (required)
APP_DATABASE__URL=

# Type: number (optional, default: 10)
APP_DATABASE__POOL=10
```

### JSON Schema (config.schema.json)

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "server": {
      "type": "object",
      "properties": {
        "host": { "type": "string", "default": "localhost" },
        "port": { "type": "number", "default": 3000 }
      }
    },
    "database": {
      "type": "object",
      "properties": {
        "url": { "type": "string", "format": "uri" },
        "pool": { "type": "number", "default": 10 }
      },
      "required": ["url"]
    }
  }
}
```

## Schema File Format

Your schema file must export `schema`, `configSchema`, or a default export:

```typescript
// src/config.ts
import { z } from 'zonfig';

export const schema = z.object({
  server: z.object({
    host: z.string().default('localhost').describe('Server hostname'),
    port: z.number().default(3000).describe('Server port'),
  }),
  database: z.object({
    url: z.string().url().describe('Database connection URL'),
    pool: z.number().default(10).describe('Connection pool size'),
  }),
});
```

<Callout type="tip">
Use `.describe()` on your Zod fields to add descriptions to the generated documentation.
</Callout>

## Automation

### npm Script

```json
{
  "scripts": {
    "docs:config": "zonfig docs -s ./src/config.ts -o ./docs"
  }
}
```

### Pre-commit Hook

```bash
#!/bin/sh
npx zonfig docs -s ./src/config.ts
git add CONFIG.md .env.example config.schema.json
```

## Next Steps

- [Schema Definition](/docs/schema) - Add descriptions to your schema
- [zonfig validate](/docs/cli/validate) - Validate configuration files
